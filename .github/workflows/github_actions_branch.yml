name: github-actions branch

on: [pull_request]

jobs:
  build:
    runs-on: ubuntu-16.04
    steps:
      - uses: actions/checkout@v2
      - name: Create tag
        uses: actions/github-script@v4
        with:
          script: |
            const fs = require('fs');

            const version = fs.readFileSync('./.version').toString().trim();
            const alphaVersion = `${version}-alpha.${context.issue.number}`;

            github.git.createRef({
              owner: context.repo.owner,
              repo: context.repo.repo,
              ref: `refs/tags/${alphaVersion}`,
              sha: context.sha
            })
